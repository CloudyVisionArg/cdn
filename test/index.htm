<!--
	typeahead: https://github.com/corejavascript/typeahead.js
	Ejemplo: https://digitalfortress.tech/tutorial/smart-search-using-twitter-typeahead-bloodhound/
	bootstrap-tagsinput: https://github.com/bootstrap-tagsinput/bootstrap-tagsinput

-->
<!DOCTYPE html>
<html>
<head>
    <title>Bootstrap Tags Input with Autocomplete</title>
	<link href="tagsinput/bootstrap-tagsinput-typeahead.css" rel="stylesheet" />
	<link href="tagsinput/bootstrap-tagsinput.css" rel="stylesheet">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
	/*
	body{ font-family:calibri;}
	.twitter-typeahead { display:initial !important; }
	.bootstrap-tagsinput {line-height:40px;display:block !important;}
	.bootstrap-tagsinput .tag {background:#09F;padding:5px;border-radius:4px;}
	.tt-hint {top:2px !important;}
	.tt-input{vertical-align:baseline !important;}
	.typeahead { border: 1px solid #CCCCCC;border-radius: 4px;padding: 8px 12px;width: 300px;font-size:1.5em;}
	.tt-menu { width:300px; }
	span.twitter-typeahead .tt-suggestion {padding: 10px 20px;	border-bottom:#CCC 1px solid;cursor:pointer;}
	span.twitter-typeahead .tt-suggestion:last-child { border-bottom:0px; }
	.demo-label {font-size:1.5em;color: #686868;font-weight: 500;}
	.bgcolor {max-width: 440px;height: 200px;background-color: #c3e8cb;padding: 40px 70px;border-radius:4px;margin:20px 0px;}
	*/
	</style>
</head>
<body>
	<h1>Bootstrap Tags Input with Autocomplete</h1>
	<div class="bgcolor">
	<div class="mb-3">
		<label class="form-label">Pais</label>
		<input type="text" value="" class="form-control" id="tags-input" data-role="tagsinput" />
	</div>
	<div class="mb-3">
		<label class="form-label">Pais</label>
		<input type="text" class="form-control" id="input" autocomplete="off" />
	</div>
	</div>
<script src="https://code.jquery.com/jquery-3.7.1.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="typeahead.bundle.js"></script>
<script src="tagsinput/bootstrap-tagsinput.js"></script>
<script>
	var countries = new Bloodhound({
		datumTokenizer: Bloodhound.tokenizers.obj.whitespace('name'),
		queryTokenizer: Bloodhound.tokenizers.whitespace,
		
		/*
		prefetch: {
			url: 'countries.json',
			transform: function (data) {
				debugger;
            	var newData = [];
            	data.forEach(function (item) {
                	newData.push({'name': item});
            	});
            	return newData;
        	},
			filter: function (list) {
				debugger;
				return $.map(list, function(name) {
					return { name: name };
				});
			},
			
			prepare: function (settings) {
				debugger;
			}
			
		},
		*/
		
		/*
		prefetch: {
        	url:'https://raw.githubusercontent.com/twitter/typeahead.js/gh-pages/data/countries.json',
        	transform: function (data) {          // we modify the prefetch response
				debugger;
            	var newData = [];                 // here to match the response format 
            	data.forEach(function (item) {    // of the remote endpoint
                	newData.push({'name': item});
            	});
            	return newData;
        	}
    	},
		*/
    	remote: {
        	url: 'https://restcountries.com/v3.1/alpha?codes=%QUERY',
        	wildcard: '%QUERY'                    // %QUERY will be replace by users input in
    	},
		 
	});
	countries.initialize();

	
	$('#tags-input').tagsinput({
	  typeaheadjs: {
		name: 'countries',
		displayKey: 'name',
		valueKey: 'name',
		source: countries.ttAdapter()
	  }
	});
	

	/*
	$('#input').typeahead({
  		hint: true,
  		highlight: true,
  		minLength: 1
	},
	{
  		name: 'countries',
  		source: countries   // Bloodhound instance is passed as the source
	});
	*/
</script>
</body>
</html>